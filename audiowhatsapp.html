<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">

	<title>Audio Recording</title>
	<link rel="icon" href="https://cdn-hjhjb.nitrocdn.com/cZXOmaOnBzchEVsoklMbKZDzVVPPjcww/assets/images/optimized/rev-5cfca33/www.informationsys.com/wp-content/uploads/2021/11/cropped-cropped-Icon_information-192x192.png" type="image/x-icon">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
	<div class="title-container">
		<img src="https://api-cdn.sae1.pure.cloud/response-assets/v2/uploads/c08ebdaa-1a7d-455f-9299-f33a257838ed/ebefa2b4-074a-4a88-a55e-b18fae60f20f.679d0113-af51-458c-bbc0-5eea617acbc5.png"
			alt="Previsalud" width="170">
		<img
			src="https://cdn-hjhjb.nitrocdn.com/cZXOmaOnBzchEVsoklMbKZDzVVPPjcww/assets/images/optimized/rev-5cfca33/www.informationsys.com/wp-content/uploads/2021/11/cropped-cropped-Icon_information-192x192.png"
			alt="Infosys" width="50">
	</div>

	<div id="container-timer">
		<p id="timer">00:00</p>
		<canvas id="waveCanvas" style="display: none;"></canvas>
	</div>

	<div class="controls">
		<button id="recordButton" class="button" style="display: block;"><i class="fa-solid fa-microphone"></i> Grabar</button>
		<button id="stopButton" class="button" style="display: none;"><i class="fa-solid fa-stop"></i> Detener</button>
	</div>

	<div id="loading" style="display: none;">
		<section class="dots-container">
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
			<div class="dot"></div>
		</section>
	</div>

	<div id="recordingsList"></div>

	<div class="controls">
		<button id="sendButton" class="button" style="display: none"><i class="fa-solid fa-paper-plane"></i> Enviar</button>
	</div>
	

	<script src="js/WebAudioRecorder.min.js"></script>
	<script src="js/app.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>
	<script type="text/javascript">
		// Obtain a reference to the platformClient object
		const platformClient = require("platformClient");
		const api = platformClient.ApiClient.instance;
		api.setEnvironment(platformClient.PureCloudRegionHosts.sa_east_1);

		const searchParameters = new URLSearchParams(
			location.search.slice(1) || location.hash.slice(1)
		);
		const conversationId = searchParameters.get("gcConversationId");
		const token = searchParameters.get("access_token");

		if (conversationId) {
			localStorage.setItem('conversationIdCache', conversationId);
			console.log('ConversationID: ' + conversationId);
		} else {
			var conversationCache = localStorage.getItem('conversationIdCache');
			console.log('ConversationID: ' + conversationCache);
		}

		api.loginImplicitGrant(
			"2bce4519-f4fb-449a-973f-127e19009623",
			"https://juanedaza.github.io/AudioRecorder/audiowhatsapp.html"
		)
	</script>

</body>

</html>